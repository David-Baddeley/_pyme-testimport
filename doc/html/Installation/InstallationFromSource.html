<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation for development or instrument control &mdash; PYME 17.07.13 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '17.07.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PYME 17.07.13 documentation" href="../index.html" />
    <link rel="next" title="PYMEAcquire - Instrument control and simulation" href="../PYMEAcquire.html" />
    <link rel="prev" title="Installation of PYME on 64 bit Windows, OSX, or Linux" href="InstallationWithAnaconda.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../PYMEAcquire.html" title="PYMEAcquire - Instrument control and simulation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="InstallationWithAnaconda.html" title="Installation of PYME on 64 bit Windows, OSX, or Linux"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PYME 17.07.13 documentation</a> &raquo;</li>
<li><a href="http://lmsrv1/docwiki/docs/pyme-docs/Installation/InstallationFromSource.rst">Edit</a> &raquo;</li>
 

      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pymeLogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation for development or instrument control</a><ul>
<li><a class="reference internal" href="#step-1-installing-anaconda">STEP 1: Installing Anaconda</a></li>
<li><a class="reference internal" href="#step-2-add-the-david-baddeley-channel-and-install-dependencies">STEP 2: Add the <code class="docutils literal"><span class="pre">david_baddeley</span></code> channel and install dependencies</a></li>
<li><a class="reference internal" href="#step-3-install-mercurial">STEP 3: Install mercurial</a></li>
<li><a class="reference internal" href="#step-4-install-a-c-c-compiler">STEP 4: Install a c/c++ compiler</a></li>
<li><a class="reference internal" href="#step-5-get-the-code">STEP 5: Get the code</a></li>
<li><a class="reference internal" href="#step-6-install">STEP 6: Install</a></li>
<li><a class="reference internal" href="#further-configuration-mostly-optional">Further configuration (mostly optional)</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#linux-gnome">Linux (Gnome)</a></li>
<li><a class="reference internal" href="#osx">OSX</a></li>
<li><a class="reference internal" href="#basic-configuration">Basic Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prerequisites-for-the-adventurous">Prerequisites for the adventurous</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="InstallationWithAnaconda.html"
                        title="previous chapter">Installation of PYME on 64 bit Windows, OSX, or Linux</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../PYMEAcquire.html"
                        title="next chapter"><strong>PYMEAcquire</strong> - Instrument control and simulation</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-for-development-or-instrument-control">
<span id="installationfromsource"></span><h1>Installation for development or instrument control<a class="headerlink" href="#installation-for-development-or-instrument-control" title="Permalink to this headline">¶</a></h1>
<p>If you want to contribute to PYMEs development, or you want to use PYME in a context (e.g. instrument control) which
requires modification to some of the scripts you will want to have the PYME sources somewhere you can easily find, modify
and update them.</p>
<p>If you just want to use the data analysis features then you are strongly advised to follow the instructions in <a href="#id1"><span class="problematic" id="id2">:ref:`installationanaconda`_</span></a>
instead.</p>
<p>The easiest (and only supported) way of getting a development build up and running also uses
<a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>. Although PYME will work with other python 2.7 distributions,
this will involve considerably more effort to navigate the many <a class="reference internal" href="#prereqnoanaconda"><span>dependencies</span></a>.</p>
<div class="section" id="step-1-installing-anaconda">
<h2>STEP 1: Installing Anaconda<a class="headerlink" href="#step-1-installing-anaconda" title="Permalink to this headline">¶</a></h2>
<p>Download and install <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> from
<a class="reference external" href="https://store.continuum.io/cshop/anaconda/">https://store.continuum.io/cshop/anaconda/</a>. Choose the <strong>64 bit</strong> version of <strong>Python 2.7</strong>
for your prefered platform.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Anaconda is available in both Python 2.7 and Python 3.x flavours. PYME will <strong>only</strong> work with the Python 2.7 version.</p>
</div>
</div>
<div class="section" id="step-2-add-the-david-baddeley-channel-and-install-dependencies">
<h2>STEP 2: Add the <code class="docutils literal"><span class="pre">david_baddeley</span></code> channel and install dependencies<a class="headerlink" href="#step-2-add-the-david-baddeley-channel-and-install-dependencies" title="Permalink to this headline">¶</a></h2>
<p>We maintain a conda <em>channel</em> with packaged versions of a number of dependencies which are either not available through
the standard conda libraries or for which the required version is newer than the anaconda default. This channel also has
a <em>metapackage</em> <code class="docutils literal"><span class="pre">pyme-depends</span></code> which lists should install the dependencies <a class="footnote-reference" href="#pymedepends" id="id4">[1]</a>.</p>
<p>To tell anaconda about our channel, and to install the dependencies we need to open a terminal window <a class="footnote-reference" href="#terminal" id="id5">[2]</a>  and run the following two commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>conda config --add channels david_baddeley
conda install pyme-depends
</pre></div>
</div>
<p>This should download and install the required dependencies.</p>
</div>
<div class="section" id="step-3-install-mercurial">
<h2>STEP 3: Install mercurial<a class="headerlink" href="#step-3-install-mercurial" title="Permalink to this headline">¶</a></h2>
<p>We need to mercurial to pull the latest source from the repository. You can either get this through your platform
repositories [linux], by downloading and installing <a class="reference external" href="http://tortoisehg.bitbucket.org/">TortoiseHG</a> [win/OSX], or by
running <code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">mercurial</span></code>.</p>
</div>
<div class="section" id="step-4-install-a-c-c-compiler">
<h2>STEP 4: Install a c/c++ compiler<a class="headerlink" href="#step-4-install-a-c-c-compiler" title="Permalink to this headline">¶</a></h2>
<p>Building PYME requires a c compiler. On Linux, make sure gcc, g++ and the standard development tools are installed. On OSX,
install XCode, and on windows download and install <a class="reference external" href="https://www.microsoft.com/en-us/download/details.aspx?id=44266">MS Visual C for Python 2.7</a>.</p>
</div>
<div class="section" id="step-5-get-the-code">
<h2>STEP 5: Get the code<a class="headerlink" href="#step-5-get-the-code" title="Permalink to this headline">¶</a></h2>
<p>The code is stored in a mercurial repository. Get the current copy by doing</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>hg clone https://bitbucket.org/david_baddeley/python-microscopy
</pre></div>
</div>
<p>or the equivalent using a gui client (eg <a class="reference external" href="http://tortoisehg.bitbucket.org/">TortoiseHG</a>).</p>
<p>If you are going to be doing significant development and plan on issuing pull requests, it might be reasonable to create
a private fork on bitbucket at this point and clone from that (this is reasonably easy to set up later, so if you&#8217;re unsure
just pull the code from the default repository and go from there).</p>
</div>
<div class="section" id="step-6-install">
<h2>STEP 6: Install<a class="headerlink" href="#step-6-install" title="Permalink to this headline">¶</a></h2>
<p>Change to the directory where you cloned the code and execute the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>python setup.py develop
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are on OSX, you might want to do the following instead to avoid problems running GUI scripts:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/PATH/TO/ANACONDA/python.app/Contents/MacOS/python setup.py develop
</pre></div>
</div>
<p class="last">this will ensure that the correct &#8220;shebang&#8221; is used to ensure that you don&#8217;t run into issues with using a
non-framework build.</p>
</div>
<p>At this point you should have a functioning install.</p>
</div>
<div class="section" id="further-configuration-mostly-optional">
<h2>Further configuration (mostly optional)<a class="headerlink" href="#further-configuration-mostly-optional" title="Permalink to this headline">¶</a></h2>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>If not already done by the setup script, create shortcuts somewhere (eg the start menu), to the following scripts:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">PYTHONDIR\Scripts\PYMEAquire.exe</span></code> (data acquisition)</li>
<li><code class="docutils literal"><span class="pre">PYTHONDIR\Scripts\launchWorkers.exe</span></code> (real time analysis)</li>
<li><code class="docutils literal"><span class="pre">PYTHONDIR\Scripts\dh5view.exe</span></code> (raw data viewer)</li>
<li><code class="docutils literal"><span class="pre">PYTHONDIR\Scripts\LMVis\VisGUI.exe</span></code> (analysed data viewer)</li>
</ul>
<p>Where  <code class="docutils literal"><span class="pre">PYTHONDIR</span></code> is the location of your python installation (typically <code class="docutils literal"><span class="pre">c:\Python27</span></code> or similar)
Optionally associate .h5 files with dh5view (will also open .tif,  .kdf &amp; .psf if you want)
and .h5r files with VisGUI. I typically do this by clicking on one of the files,
using the &#8216;Open With&#8217; option, and telling it to remember. If you&#8217;re using the
sample database, you can also associate .pmu files with <code class="docutils literal"><span class="pre">PYTHONDIR\Scripts\pymeUrlOpener.cmd</span></code>.</p>
</div>
<div class="section" id="linux-gnome">
<h3>Linux (Gnome)<a class="headerlink" href="#linux-gnome" title="Permalink to this headline">¶</a></h3>
<p>Change to the <code class="docutils literal"><span class="pre">PYME/gnome</span></code> directory and run <code class="docutils literal"><span class="pre">install_gnome.sh</span></code>. This should
(hopefully) set up
associations and :) thumbnailing! With any luck, file permissions should be OK
out of the repository, but there&#8217;s a chance you&#8217;re going to have to make a
couple of the scripts executable.</p>
</div>
<div class="section" id="osx">
<h3>OSX<a class="headerlink" href="#osx" title="Permalink to this headline">¶</a></h3>
<p>Build the opener stubs (to allow file association) by executing the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd osxLaunchers
xcodebuild -alltargets
</pre></div>
</div>
</div>
<div class="section" id="basic-configuration">
<span id="basicconfig"></span><h3>Basic Configuration<a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h3>
<p>In addition to the setup detailed above, PYME has a couple of configuration
options which are controlled by environment variables. These are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>PYMEDATADIR</td>
<td>Default location where PYMEAcquire saves data. Eg
<code class="docutils literal"><span class="pre">D:\</span></code>. Also place where other parts of analysis
chain look for data.</td>
</tr>
<tr class="row-even"><td>PYMEMICRPATH</td>
<td>Used with sample database to know where (on the local
machine) the microscope computer is mapped.</td>
</tr>
<tr class="row-odd"><td>PYMENASPATH</td>
<td>As for PYMEMICRPATH, but for the NAS</td>
</tr>
</tbody>
</table>
<p>When useing PYME for data acquisition you probably want to set at least PYMEDATADIR, as the default is not particularly useful.</p>
<p>You should now have a setup which works for simulation*, data analysis, &amp; visualisation. Interfacing with hardware obviously requires a little more work - see <a class="reference internal" href="../ConfiguringPYMEAcquire.html#configuringpymeacquire"><span>Configuring PYME Acquire</span></a>.</p>
<p>* simulation probably won&#8217;t work perfectly until you&#8217;ve done the EMGain calibration section of <a class="reference internal" href="../ConfiguringPYMEAcquire.html#configuringpymeacquire"><span>Configuring PYME Acquire</span></a>.</p>
</div>
</div>
<div class="section" id="prerequisites-for-the-adventurous">
<span id="prereqnoanaconda"></span><h2>Prerequisites for the adventurous<a class="headerlink" href="#prerequisites-for-the-adventurous" title="Permalink to this headline">¶</a></h2>
<p>The prefered way of getting pre-requisites is to use the <code class="docutils literal"><span class="pre">pyme-depends</span></code> package as noted above. If using a non-anaconda
python distribution, the pre-requisites will need to be sources and installed manually. Below is an <strong>outdated and
unmaintained</strong> list of pre-requisites. A more up to date list can be found by looking at <code class="docutils literal"><span class="pre">meta.yaml</span></code> file used to generate
the <code class="docutils literal"><span class="pre">conda</span></code> package.</p>
<p>PYME requires:</p>
<ul class="simple">
<li>Python 2.7</li>
<li>a c compiler (on windows I recommend the free <em>Visual C for python</em>, on linux or OSX just use the platform gcc)</li>
<li>python-dev (only on Linux - has the Python development header files)</li>
</ul>
<p>and the following Python packages:</p>
<ul class="simple">
<li>Numpy</li>
<li>Scipy</li>
<li>Matplotlib</li>
<li>wxPython (&gt;2.8.11)</li>
<li>pytables</li>
<li>Pyro (any 3.x version should work - the newer version 4 won&#8217;t)</li>
<li>PyOpenGL</li>
<li>PIL (Python Imaging Library)</li>
<li>pywin32 (only req. on windows)</li>
</ul>
<p>For full functionality, the following are also useful:</p>
<ul class="simple">
<li>PySerial       [acquisition with real hardware]</li>
<li>PyFFTW3</li>
<li>MySQL-python   [sample DB server]</li>
<li>Django (&gt;1.2)  [sample DB server]</li>
<li>Django-south   [sample DB server]</li>
<li>Mayavi2</li>
<li>traits</li>
<li>traits-ui</li>
<li>Delny          [some <em>very</em> rarely used segmentation code]</li>
<li>jinja2</li>
<li>cherrypy</li>
<li>scikit-image</li>
<li>scikit-learn</li>
<li>networkx</li>
<li>toposort</li>
<li>shapely</li>
<li>zeroconf</li>
<li>requests</li>
<li>pandas</li>
<li>yaml</li>
</ul>
<p>There are a couple of (mostly historical) caveats:</p>
<ul class="simple">
<li>I have had problems with getting Delny to compile/install on Win/OSX, although
this might have been fixed in the interim. It&#8217;s only required in PYME for some very rarely
used functionality, so can usually be safely ignored.</li>
<li>On some (most?) versions of windows, the network stack is broken. Pyro needs
to be told about this by setting an environment variable - <code class="docutils literal"><span class="pre">PYRO_BROKEN_MSGWAITALL=1</span></code>.
I can confirm that this is the case for pretty much every XP system, but can&#8217;t comment on Vista/7).
Pyro falls back on another (slower) piece of code when this the flag is set,
so it should be safe in any case. Can&#8217;t remember exactly how to diagnose the
problem other than that Pyro falls over with cryptic error messages.</li>
<li>All nodes on the network need to have the same version of Pyro</li>
</ul>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="pymedepends" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[1]</a></td><td>This package should track with the current state of the dependencies. At present, however, the dependencies
for the python-microscopy package are likely to be updated earlier and more often. If a dependency seems to be missing,
check the <code class="docutils literal"><span class="pre">meta.yaml</span></code> file in the python-microscopy directory and if necessary use <code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span></code> to install the
missing package. Please report any missing dependencies so I can fix them.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="terminal" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[2]</a></td><td>On OSX use spotlight to launch the <strong>Terminal</strong> app, on Windows, launch the <strong>Anaconda Command Prompt</strong>
from the &#8220;Anaconda&#8221; group in the start menu.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../PYMEAcquire.html" title="PYMEAcquire - Instrument control and simulation"
             >next</a> |</li>
        <li class="right" >
          <a href="InstallationWithAnaconda.html" title="Installation of PYME on 64 bit Windows, OSX, or Linux"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PYME 17.07.13 documentation</a> &raquo;</li>
<li><a href="http://lmsrv1/docwiki/docs/pyme-docs/Installation/InstallationFromSource.rst">Edit</a> &raquo;</li>
 

      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, David Baddeley.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>